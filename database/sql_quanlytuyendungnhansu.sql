 
/*
drop table TUYENDUNGDILAM;
drop table USERS;
drop table CONGVIEC; 
drop table KHACHHANG;
drop table DOITAC;
drop table NHANVIEN;
drop table LUU_GTTKC;
*/
Use nho;

CREATE TABLE LUU_GTTKC(
	MABT VARCHAR(5) not null primary key, -- /* MA BIEN TANG */
    GIATRI INT not null
);

CREATE TABLE NHANVIEN(
   MANV CHAR(5) PRIMARY KEY,
   TENNV VARCHAR(30) NOT NULL,
   NGAYSINH date,
   LUONG int,
   SDT varchar(11),
   NGAYVL date
);

CREATE TABLE DOITAC(
   MADT CHAR(5) PRIMARY KEY,
   TENDT VARCHAR(30) NOT NULL,
   DIACHI VARCHAR(100),
   SDT CHAR(10) NOT NULL,
   NGAYHT DATE,
   GOITD VARCHAR(30)
);

CREATE TABLE KHACHHANG(
    MAKH CHAR(5) PRIMARY KEY,
	TENKH VARCHAR(30) NOT NULL,
	GIOITINH VARCHAR(10) NOT NULL,
	NGAYSINH DATE NOT NULL,
	CCCD VARCHAR(30) NOT NULL,
	SDT CHAR(10) NOT NULL
);
 
 
CREATE TABLE CONGVIEC(
   MACV CHAR(5) PRIMARY KEY,
   MADT CHAR(5) NOT NULL,
   TGBDTD DATE NOT NULL,
   TGKTTD DATE,
   LUONG DOUBLE,
   DIADIEM VARCHAR(100),
   MOTA VARCHAR(300),
   NganhNghe VARCHAR(100),
   LOAICV VARCHAR(30),
   SLCANTUYEN INT
);

CREATE TABLE TUYENDUNGDILAM(
   MACV CHAR(5) NOT NULL,
   MAKH CHAR(5) NOT NULL,
   MANV CHAR(5) NOT NULL,
   THOIGIANTD DATE NOT NULL
);



create table USERS(
    MaUser varchar(5) not null,
    chutk varchar(100),
	TaiKhoan varchar(20),
	MatKhau varchar(20),
	ChucVu varchar(20)
);

insert into USERS values ('US001', 'Lê Anh Tuấn Dũng','dung', 'dung123', 'admin');
insert into USERS values ('US002', 'Đỗ Sĩ Đạt','dat', 'dat123', 'KH');
 
ALTER TABLE congviec
ADD CONSTRAINT FK_CV FOREIGN KEY (MADT) REFERENCES doitac (MADT);

ALTER TABLE TUYENDUNGDILAM
ADD CONSTRAINT FK1_TDDL FOREIGN KEY (MACV) REFERENCES congviec (MACV);

ALTER TABLE TUYENDUNGDILAM
ADD CONSTRAINT FK2_TDDL FOREIGN KEY (MAKH) REFERENCES khachhang (MAKH);

ALTER TABLE TUYENDUNGDILAM
ADD CONSTRAINT FK3_TDDL FOREIGN KEY (MANV) REFERENCES nhanvien (MANV);

INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV001', 'Nguyen Van A', '1990-01-01', 5000000, '0987654321', '2020-01-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV002', 'Tran Thi B', '1992-05-23', 7000000, '0123456789', '2021-04-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV003', 'Le Van C', '1995-12-11', 4500000, '0912345678', '2018-07-15');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV004', 'Pham Thi D', '1988-03-31', 6000000, '0987654321', '2019-11-23');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV005', 'Nguyen Thi E', '1991-02-14', 5500000, '0167894321', '2017-05-12');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV006', 'Tran Van F', '1987-11-29', 4000000, '0987654321', '2016-10-05');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV007', 'Le Thi G', '1993-06-22', 6500000, '0123456789', '2020-03-15');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV008', 'Pham Van H', '1989-09-03', 8000000, '0912345678', '2015-08-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV009', 'Nguyen Van I', '1997-08-09', 5000000, '0987654321', '2019-02-28');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV010', 'Tran Thi K', '1994-04-12', 5500000, '0167894321', '2021-01-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV011', 'Le Van L', '1998-11-07', 4500000, '0912345678', '2022-02-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV012', 'Pham Thi M', '1991-01-22', 7000000, '0123456789', '2018-06-30');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV013', 'Nguyen Thi N', '1995-12-15', 5500000, '0912345678', '2021-05-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV014', 'Tran Van O', '1990-07-18', 6000000, '0167894321', '2017-09-15');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV015', 'Le Thi P', '1999-04-21', 4500000, '0987654321', '2022-04-01');
INSERT INTO NHANVIEN (MANV, TENNV, NGAYSINH, LUONG, SDT, NGAYVL) VALUES ('NV12', 'Le Thi P', '1999-04-21', "4500000", '0987654321', '2022-04-01');

INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT001', 'Công ty TNHH A', 'Số 10, Đường A, Quận 1, TP.HCM', '0123456789', '2022-01-01', 'Gói 3');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT002', 'Công ty TNHH B', 'Số 20, Đường B, Quận 2, TP.HCM', '0987654321', '2021-06-15', 'Gói 2');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT003', 'Công ty TNHH C', 'Số 30, Đường C, Quận 3, TP.HCM', '0912345678', '2023-02-20', 'Gói 2');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT004', 'Công ty TNHH D', 'Số 40, Đường D, Quận 4, TP.HCM', '0167894321', '2021-12-31', 'Gói 1');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT005', 'Công ty TNHH E', 'Số 50, Đường E, Quận 5, TP.HCM', '0934567890', '2022-07-10', 'Gói 1');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT006', 'Công ty TNHH F', 'Số 20, Đường F, Quận 1, TP.HCM', '0901234567', '2023-01-01', 'Gói 2');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT007', 'Công ty TNHH G', 'Số 30, Đường G, Quận 2, TP.HCM', '0912345678', '2022-06-15', 'Gói 1');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT008', 'Công ty TNHH H', 'Số 40, Đường H, Quận 3, TP.HCM', '0909123456', '2023-09-30', 'Gói 3');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT009', 'Công ty TNHH I', 'Số 50, Đường I, Quận 4, TP.HCM', '0912345678', '2022-12-31', 'Gói 3');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT010', 'Công ty TNHH J', 'Số 60, Đường J, Quận 5, TP.HCM', '0909876543', '2023-05-20', 'Gói 1');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT011', 'Công ty TNHH K', 'Số 70, Đường K, Quận 6, TP.HCM', '0912345678', '2022-11-15', 'Gói 3');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT012', 'Công ty TNHH L', 'Số 80, Đường L, Quận 7, TP.HCM', '0909123456', '2023-07-01', 'Gói 2');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT013', 'Công ty TNHH M', 'Số 90, Đường M, Quận 8, TP.HCM', '0912345678', '2022-10-31', 'Gói 2');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT014', 'Doanh nghiệp X', '12 Nguyễn Văn Linh, Hà Nội', '0987654321', '2022-01-01', 'Gói 1');
INSERT INTO DOITAC (MADT, TENDT, DIACHI, SDT, NGAYHT, GOITD) VALUES ('DT015', 'Công ty Y', '23 Trần Hưng Đạo, Hồ Chí Minh', '0123456789', '2022-02-01', 'Gói 2');
 
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH001', 'Nguyễn Văn A', 'Nam', '1990-01-01', '123456789', '0987654321');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH002', 'Trần Thị B', 'Nữ', '1995-05-05', '987654321', '0123456789');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH003', 'Lê Văn C', 'Nam', '1998-02-10', '456123789', '0912345678');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH004', 'Phạm Thị D', 'Nữ', '1997-08-20', '789456123', '0901234567');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH005', 'Nguyễn Văn E', 'Nam', '1993-11-15', '159357246', '0976543210');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH006', 'Nguyễn Thị F', 'Nữ', '1991-03-25', '246813579', '0123456789');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH007', 'Trần Văn G', 'Nam', '1999-06-30', '369258147', '0912345678');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH008', 'Lê Thị H', 'Nữ', '2000-09-10', '258369147', '0987654321');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH009', 'Phạm Văn I', 'Nam', '1985-12-31', '147258369', '0976543210');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH010', 'Nguyễn Thị K', 'Nữ', '1994-04-12', '789456123', '0123456789');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH011', 'Trần Văn L', 'Nam', '1992-07-23', '456123789', '0912345678');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH012', 'Lê Thị M', 'Nữ', '1996-10-04', '123456789', '0901234567');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH013', 'Phạm Văn N', 'Nam', '1991-02-15', '987654321', '0976543210');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH014', 'Nguyễn Thị O', 'Nữ', '1989-05-26', '369258147', '0987654321');
INSERT INTO KHACHHANG (MAKH, TENKH, GIOITINH, NGAYSINH, CCCD, SDT) VALUES ('KH015', 'Trần Văn P', 'Nam', '1988-08-07', '258369147', '0123456789');
 

INSERT INTO CONGVIEC VALUES ('CV001', 'DT001', '2023-06-01', '2023-06-30', 10.5, 'Hà Nội', 'Tuyển dụng lập trình viên', 8, 'Lập trình viên', 5);
INSERT INTO CONGVIEC VALUES ('CV002', 'DT002', '2023-07-01', '2023-07-30', 12.5, 'Hồ Chí Minh', 'Tuyển dụng nhân viên kinh doanh', 8, 'Nhân viên kinh doanh', 3);
INSERT INTO CONGVIEC VALUES ('CV003', 'DT003', '2023-08-01', '2023-08-30', 8.5, 'Đà Nẵng', 'Tuyển dụng kế toán', 7, 'Kế toán', 2);
INSERT INTO CONGVIEC VALUES ('CV004', 'DT004', '2023-09-01', '2023-09-30', 11.5, 'Hải Phòng', 'Tuyển dụng nhân viên hành chính', 8, 'Nhân viên hành chính', 4);
INSERT INTO CONGVIEC VALUES ('CV005', 'DT005', '2023-10-01', '2023-10-30', 13.5, 'Nha Trang', 'Tuyển dụng nhân viên bảo vệ', 10, 'Nhân viên bảo vệ', 3);
INSERT INTO CONGVIEC VALUES ('CV006', 'DT006', '2023-11-01', '2023-11-30', 15.5, 'Hà Nội', 'Tuyển dụng nhân viên marketing', 8, 'Nhân viên marketing', 5);
INSERT INTO CONGVIEC VALUES ('CV007', 'DT007', '2023-12-01', '2023-12-30', 10.5, 'Hồ Chí Minh', 'Tuyển dụng lập trình viên', 8, 'Lập trình viên', 5);
INSERT INTO CONGVIEC VALUES ('CV008', 'DT008', '2023-01-01', '2023-01-30', 9.5, 'Hà Nội', 'Tuyển dụng nhân viên kế toán', 7, 'Nhân viên kế toán', 2);
INSERT INTO CONGVIEC VALUES ('CV009', 'DT009', '2023-02-01', '2023-02-28', 11.5, 'Đà Lạt', 'Tuyển dụng nhân viên bán hàng', 9, 'Nhân viên bán hàng', 4);
INSERT INTO CONGVIEC VALUES ('CV010', 'DT010', '2023-03-01', '2023-03-30', 13.5, 'Hồ Chí Minh', 'Tuyển dụng nhân viên IT support', 8, 'Nhân viên IT support', 3);
INSERT INTO CONGVIEC VALUES ('CV011', 'DT011', '2022-06-01', '2022-06-30', 10.5, 'Hà Nội', 'Tìm kiếm người tài năng', 8, 'Kinh doanh', 3);
INSERT INTO CONGVIEC VALUES ('CV012', 'DT012', '2022-07-01', '2022-08-30', 8.5, 'TP.HCM', 'Lập trình web', 6, 'Công nghệ thông tin', 5);
INSERT INTO CONGVIEC VALUES ('CV013', 'DT013', '2022-05-15', '2022-06-15', 15, 'Đà Nẵng', 'Quản lý dự án', 9, 'Quản lý', 2);
INSERT INTO CONGVIEC VALUES ('CV014', 'DT014', '2022-07-15', '2022-08-15', 12, 'Hải Phòng', 'Kiểm tra chất lượng', 8, 'Sản xuất', 4);
INSERT INTO CONGVIEC VALUES ('CV015', 'DT015', '2022-09-01', '2022-09-30', 9, 'Hà Nội', 'Chăm sóc khách hàng', 7, 'Tư vấn', 1);
INSERT INTO CONGVIEC VALUES ('CV017', 'DT009', '2022-09-01', '2022-09-30', 9, 'Hà Nội', 'Chăm sóc khách hàng', 7, 'Tư vấn', '3');
 update congviec set luong = 100;
 UPDATE CONGVIEC SET NGANHNGHE = 'Công nghệ thông tin', loaicv = 'FullTime', slcantuyen = 3 where macv = 'CV001';
  UPDATE CONGVIEC SET NGANHNGHE = 'Kinh doanh', loaicv = 'FullTime', slcantuyen = 3 where macv = 'CV002'; 
 UPDATE CONGVIEC SET NGANHNGHE = 'Kế toán', loaicv = 'PartTime', slcantuyen = 3 where macv = 'CV003'; 
 UPDATE CONGVIEC SET NGANHNGHE = 'Hành chính', loaicv = 'FullTime', slcantuyen = 1 where macv = 'CV004';
 UPDATE CONGVIEC SET NGANHNGHE = 'Bảo vệ', loaicv = 'Lương liền', slcantuyen = 1 where macv = 'CV005';
 UPDATE CONGVIEC SET NGANHNGHE = 'Marketing', loaicv = 'FullTime', slcantuyen = 1 where macv = 'CV006';
 UPDATE CONGVIEC SET NGANHNGHE = 'Công nghệ thông tin', loaicv = 'FullTime', slcantuyen = 2 where macv = 'CV007';
 UPDATE CONGVIEC SET NGANHNGHE = 'Kế toán', loaicv = 'FullTime', slcantuyen = 1 where macv = 'CV008';
 UPDATE CONGVIEC SET NGANHNGHE = 'Kinh doanh', loaicv = 'FullTime', slcantuyen = 3 where macv = 'CV009';
 UPDATE CONGVIEC SET NGANHNGHE = 'Công nghệ thông tin', loaicv = 'FullTime', slcantuyen = 2 where macv = 'CV010';
 UPDATE CONGVIEC SET NGANHNGHE = 'Công nghệ thông tin', loaicv = 'FullTime', slcantuyen = 1 where macv = 'CV011';
 UPDATE CONGVIEC SET NGANHNGHE = 'Công nghệ thông tin', loaicv = 'FullTime', slcantuyen = 3 where macv = 'CV012'; 
 UPDATE CONGVIEC SET NGANHNGHE = 'Quản lý', loaicv = 'FullTime', slcantuyen = 1 where macv = 'CV013';
 UPDATE CONGVIEC SET NGANHNGHE = 'Kiểm tra chất lượng', loaicv = 'FullTime', slcantuyen = 2 where macv = 'CV014';
 UPDATE CONGVIEC SET NGANHNGHE = 'Chăm sóc khách hàng', loaicv = 'FullTime', slcantuyen = 2 where macv = 'CV015';
 UPDATE CONGVIEC SET NGANHNGHE = 'Chăm sóc khách hàng', loaicv = 'FullTime', slcantuyen = 3 where macv = 'CV017';


 
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV001', 'KH001', 'NV001', '2023-05-08');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV002', 'KH002', 'NV002', '2023-05-09');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV003', 'KH003', 'NV003', '2023-05-10');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV004', 'KH004', 'NV004', '2023-04-11');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV005', 'KH001', 'NV005', '2023-05-12');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV006', 'KH006', 'NV006', '2023-01-13');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV007', 'KH007', 'NV007', '2023-02-14');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV008', 'KH008', 'NV008', '2023-02-15');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV009', 'KH001', 'NV009', '2023-03-16');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV010', 'KH010', 'NV010', '2023-03-17');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV011', 'KH013', 'NV011', '2023-01-18');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV012', 'KH012', 'NV012', '2023-02-19');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV013', 'KH013', 'NV013', '2023-04-20');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV014', 'KH003', 'NV014', '2023-03-21');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV015', 'KH014', 'NV015', '2023-05-20');
INSERT INTO TUYENDUNGDILAM (MACV, MAKH, MANV, THOIGIANTD) VALUES ('CV015', 'KH014', 'NV015', '2023-05-20');

INSERT INTO LUU_GTTKC VALUES ('QLKH', 20);
INSERT INTO LUU_GTTKC VALUES ('QLNV', 20);
INSERT INTO LUU_GTTKC VALUES ('QLCV', 20);
INSERT INTO LUU_GTTKC VALUES ('QLDT', 20); 
INSERT INTO LUU_GTTKC VALUES ('QLTK', 4);  

GRANT ALL PRIVILEGES ON nho.* TO 'nho'@'localhost';
